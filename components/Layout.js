import Link from "next/link";
import Head from "next/head";
import Router, { useRouter } from "next/router";
import NProgress from "nprogress";

Router.onRouteChangeStart = () => {
  NProgress.start();
};

Router.onRouteChangeComplete = () => NProgress.done();
Router.onRouteChangeError = () => NProgress.done();

function Layout({ children, pageTitle, docTitle }) {
  const router = useRouter();

  return (
    <div className="o-page">
      <Head>
        <title>{docTitle || "Next Portfolio"}</title>
      </Head>
      <header>
        <h1>
          {router.pathname === "/" ? (
            "Next Portfolio "
          ) : (
            <Link href="/">
              <a>Next Portfolio</a>
            </Link>
          )}
          <span>.</span>
        </h1>
        <nav>
          <Link href="/">
            <a>Home</a>
          </Link>
          <Link href="/about">
            <a>About</a>
          </Link>
          <Link href="/hireme">
            <a>Hire me</a>
          </Link>
          <Link href="/blog">
            <a>Blog</a>
          </Link>
        </nav>
      </header>
      <main className="o-main">
        <h2 className="c-page-title">
          <span>
            {pageTitle.split(" ")[0]} <span>{pageTitle.split(" ")[1]}</span>
          </span>
        </h2>
        {children}
      </main>
      <footer>
        <span>Ahmed Hosna &copy; {new Date().getFullYear()}</span>
        <p>
          Very thanks to Owen Earl for the great font:{" "}
          <a href="https://fonts.google.com/specimen/Jost?query=Jost">Jost</a>.
        </p>
      </footer>
      <style jsx>{`
        .o-page {
          display: flex;
          flex-direction: column;
          min-height: 100vh;
        }

        .o-main {
          flex: 1;
          padding: 1em;
          position: relative;
          padding-left: 8rem;
        }

        .c-page-title {
          font-size: 22px;
          transform: scale(-1);
          writing-mode: vertical-lr;
          position: absolute;
          left: 55px;
          top: 0;
          height: 100%;
          text-align: right;
          margin: 0;
          padding-bottom: 0;
          box-sizing: border-box;
          padding-bottom: 40px;
          letter-spacing: 0;
        }

        .c-page-title:before {
          content: "";
          display: block;
          height: 100%;
          width: 1px;
          background: hsl(40, 84%, 75%);
          position: absolute;
          left: calc(50% - 3px);
          z-index: -1;
        }

        .c-page-title > span {
          background: #fff;
          z-index: 1;
          padding: 13px 0;
          font-style: italic;
          font-weight: 500;
        }

        .c-page-title > span span {
          font-weight: 800;
        }

        header {
          display: flex;
          align-items: center;
          justify-content: space-between;
          z-index: 1;
          border-bottom: 1px solid #f5d189;
        }

        header h1 {
          margin: 0;
          font-size: 28px;
          position: relative;
          display: flex;
          font-family: "Jost", sans-serif;
        }

        header h1:before {
          content: "";
          display: block;
          width: 86px;
          height: 86px;
          position: absolute;
          top: -10px;
          z-index: -1;
          left: 10px;
          background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' data-name='Layer 0 Image' width='800' height='600' fill='%23f5d189'%3E%3Cpath d='M382.206 492.146c-88.672-1.511-149.174-51.4-174.22-130.821-14.37-45.568-8.138-89.781 12.556-131.574 20.9-42.21 52.075-75.912 94.52-97.5 17.729-9.016 36.734-15.6 55.4-22.645 7.279-2.746 15.009-2.071 22.667.65a82.363 82.363 0 0030.3 4.546c22.691-.766 42.963 6.5 61.752 18.07 12.663 7.795 26.333 14.1 37.673 23.971q52.853 46.015 73.5 113c5.223 16.805 3.392 33.981 1.765 50.971-.938 9.791-4.766 19.468-6.3 28.858-1.2 7.3-7.159 12.6-6.689 17.47.71 7.361-2.3 12.014-5.266 17.145-27.885 48.264-71.573 75.643-123.046 92.666-18.23 6.028-36.715 11.08-55.708 13.928-7.334 1.1-14.852 1.019-18.904 1.265zM272.569 255.7c.788-.525 1.827-.822 2.033-1.412 7.753-22.12 23.258-38.234 40.15-53.642 8.389-7.651 13.952-17.942 21.3-29.1-23.441 7.547-62.458 60.678-63.483 84.154zm253.177 82.772l-46.171 59.388c29.525-25.095 43.849-43.825 46.171-59.384zm-259.27-159.119c16.609-14.2 35.818-25.143 50.924-41.224-19.172 10.99-37.319 23.263-50.924 41.224zm215.936 152.24c-6.771 8.518-16.474 15.219-17.618 27.329 7.896-7.782 15.114-15.993 17.618-27.329zM322.82 254.424c7.267-10.948 16.233-20.781 20.071-33.567-10.615 8.902-14.986 21.525-20.071 33.567zm213.256 174.543l1.662 1.372a69.319 69.319 0 0018.511-19.848c-3.563 2.612-6.411 5.923-9.533 8.951-3.416 3.311-7.082 6.358-10.64 9.525zM257.563 187.7c-3.961 2.923-6.738 5.553-8.325 9.292-.434 1.022-1.033 2.19.182 2.917a4 4 0 002.272-.075c.108-4.712 7.721-5.255 5.871-12.134z'/%3E%3C/svg%3E%0A");
          background-size: 190%;
          background-repeat: no-repeat;
          background-position: center;
        }

        header h1 span {
          color: hsl(40, 84%, 75%);
          font-size: 140%;
          position: absolute;
          right: -12px;
          line-height: 1;
          bottom: 4px;
        }

        header,
        footer {
          padding-right: 1em;
          padding-left: 1em;
          background: hsla(40, 100%, 99%, 1);
        }

        footer {
          margin-top: auto;
          text-align: center;
          border-top: 1px solid #f5d189;
          padding-top: 1em;
          padding-bottom: 1em;
          font-size: 16px;
          z-index: 1;
          position: relative;
        }

        footer:before {
          content: "";
          width: 180px;
          height: 80px;
          display: block;
          position: absolute;
          top: 50%;
          left: 50%;
          background-repeat: no-repeat;
          background-position: center;
          background-size: 100%;
          z-index: -1;
          opacity: 0.75;
          background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' data-name='Layer 0 Image' width='800' height='600' fill='%23f5d189'%3E%3Cpath d='M224.772 169.7c-1.769 30.972-9.834 60.051-26.4 86.525-4.387 7.01-10.594 12.316-17.268 17.047-4.12 2.92-8.874 1.4-13.4 1.648-1.386.076-5.433-3.887-4.521 2.069.057.371-2.291.044-3.405-.466-7.394-3.385-13.484-8.074-17.193-15.666-10.582-21.66-9.45-43.255-.011-64.845 8.279-18.936 18.832-36.256 34.628-50.1 7.987-7 17.973-8.459 27.481-10.517 8.036-1.739 16.138 5.861 18.225 14.911 1.464 6.353 1.7 12.843 1.864 19.394zm-18.906 5.02c.01-5.049.755-8.876-3.968-10.265-4.945-1.454-5.879 2.357-7.524 5.488-.812 1.546-1.509 3.725-3.919 3.436-2.5-.3-3.316-2.167-3.672-4.423-.219-1.38-.033-3.214-1.784-3.692-2.035-.556-2.84 1.259-3.868 2.539a159.721 159.721 0 00-21.183 35.386c-3.474 7.816-6.569 15.871-7.5 24.486-1.288 11.934 7.752 18.561 18.776 13.829a35.541 35.541 0 0015.634-13.145c11.156-16.689 16.382-35.499 19.008-53.638zM589.869 173.3c-.355-24.751 6.264-44.654 19.17-62.528 2.831-3.921 6.01-7.576 10.2-10.107 5.886-3.556 12.374-1.625 14.172 4.816 1.012 3.622 2.779 4.391 5.947 4.934 14.262 2.446 25.066 12.828 25.514 27.032.928 29.43-8.227 56.015-28.324 77.594-14.6 15.674-30.606 11.943-39.786-7.643-5.449-11.623-6.878-24.053-6.893-34.098zm19.061-31.9c-4.709 15.411-4.2 29.415 2.982 42.761 5.319 9.882 12.442 10.337 19.691 1.618 5.3-6.372 8.426-13.906 10.891-21.734 3.7-11.754-.511-19.852-12-24.072-4.621-1.7-7.289-.6-8.176 4.054-.766 4.032-2.272 7.781-6.708 7.591-4.957-.213-4.583-5.125-5.541-8.617a12.617 12.617 0 00-1.139-1.601zM512.549 175.707c-1.057 22.6-9.607 43-18.885 63.163-5.5 11.954-12.47 22.549-24.633 29.08-10.7 5.745-20.638 3.807-26.567-7.052-9.33-17.089-12.988-35.209-7.224-54.394 5.031-16.744 12.714-32.084 24.334-45.329 1.778-2.027 4.04-4.1 6.258-3.487 4.824 1.336 6.666-2.09 8.36-4.77 4.593-7.267 11.269-9.007 18.939-7.691 8.476 1.454 15.274 5.557 18.168 14.346a35.06 35.06 0 011.25 16.134zm-64.488 47.973c.293 5.009 1.434 10.787 6.747 13.328 4.881 2.333 8.732-1.944 11.843-5.158 12.8-13.231 20.761-29.187 25.21-46.931 1.154-4.606-1.712-6.862-5.744-8.22-3.815-1.285-6.312-.6-7.869 3.506-1 2.625-2.406 5.8-6.087 5.28-3.207-.453-2.555-3.821-3.474-5.951-.466-1.081-.089-2.727-1.674-2.987-1.4-.23-2.392.97-2.925 2-7.295 14.112-14.467 28.282-16.027 45.133zM623.358 300.762c-.443 19.5-6.908 37.331-14.19 55.153a118.567 118.567 0 01-20.341 33.114c-7.519 8.7-22.921 12.172-33.5 5.96-3.959-2.326-4.661-7.474-8.984-9.223 5.026-5.463-2.563-7.746-3.016-11.9-1.841-16.862-1.312-33.071 6.6-48.9 7.746-15.5 17.88-28.545 31.67-38.844a5.168 5.168 0 002.107-4.2 25.555 25.555 0 011.5-7.3c5.388-12.989 14.4-15.108 24.918-5.78 9.525 8.458 13.585 19.316 13.236 31.92zm-27.17-6.537c-1.863 1.854-1.952 3.791-2.31 5.616-.405 2.068-1.889 3.235-3.57 2.238-4.144-2.456-6.146.509-8.427 2.839a93.915 93.915 0 00-15.828 20.873c-4.467 8.294-9.2 16.857-7.991 27.038.751 6.326 1.335 13.277 8.35 15.372 7.189 2.146 12.621-2.557 17.332-7.579.283-.3.468-.693.734-1.014 10.272-12.407 14.861-27.446 18.539-42.593a23.179 23.179 0 00-6.829-22.79zM314.484 262.869A145.217 145.217 0 01295 326.56c-1.463 2.523-3.24 4.864-4.71 7.383-5.947 10.19-15.331 14.22-26.563 14.5-3.882.1-6.044-2.977-7.8-6.214a53.6 53.6 0 01-5.362-37.04 197.632 197.632 0 0129.053-70.861 54.154 54.154 0 019.262-10.113c3.821-3.441 7.077-2.14 8.373 2.92.444 1.733.315 3.747 2.733 4.411 9.649 2.649 10.937 11.386 13.329 19.057 1.036 3.303.726 7.028 1.169 12.266zm-51.3 49.894c.255 3.2-.26 6.878 3 8.477 3.042 1.491 5.476-1.21 7.744-2.95a33.447 33.447 0 007.9-8.865 114.429 114.429 0 0016.4-43.665c.617-3.987.7-8.925-3.224-9.676-4.143-.794-10.089-1.761-12.623 4.44a22.117 22.117 0 01-2.709 4.934c-10.572 14.034-13.002 30.842-16.484 47.305zM350.107 441.839c6.874-3.214 4.054-6.547.073-8.064-9.1-3.467-9.667-11.841-11.335-19.1-1.066-4.645-.167-10.079 1.051-14.853 5.513-21.605 15.443-41.3 27.388-59.984 1.966-3.076 5.426-5.084 7.395-8.376a3.632 3.632 0 014.353-1.715c1.828.618 2.365 1.912 2.162 3.922-.376 3.745 1.254 6.571 4.012 9.282 7.588 7.459 6.877 17.482 6.076 26.634-2.044 23.368-9.921 45.025-22.678 64.71-3.886 5.992-9.304 10.596-18.497 7.544zm4.981-28.123c5.137-4.568 6.893-10.09 9.637-15.144 5.047-9.3 7.33-19.17 8.719-29.418.231-1.706.137-3.53-1.883-4.13-1.976-.588-3 1.054-3.883 2.368-.8 1.193-.859 3.368-1.856 3.852-3.37 1.639-1.083 9.918-8.294 6.965-.919-.376-1.777 1.288-.681 2.1 4.787 3.542 1.734 7.42.429 11-2.559 7.017-4.398 14.016-2.188 22.407zM335.878 134.506c-.491-1.706-.981-3.412-1.7-5.9a62.436 62.436 0 00-11.372 21.9c-1.478 5.174 2.553 9.647 7.96 9.362 5.445-.287 9.473-3.309 12.393-7.6 7.7-11.329 11.13-24.39 13.106-37.591a22.2 22.2 0 00-2.33-13.6c-2.114-3.748 2.166-13.195 6.582-14.617 5.528-1.781 8.152 2.216 10.034 6.247 3.711 7.942 2.414 16.56 1.653 24.735a123.166 123.166 0 01-16.823 52.007c-4.247 7.145-9.12 13.715-18.164 15.012-15.41 2.211-21.728.591-25.733-14.891-5.277-20.4 5.913-48.7 23.305-60.937 1.927-1.356 3.874-2.5 6.378-1.532 2.856 1.105 2.443 3.728 2.539 5.875.358 8-3.22 14.808-6.253 21.766zM442.481 513.928c-4.932.424-8.542-1.511-8.759-6.218-.383-8.319-2.236-16.073.188-25.181a137.515 137.515 0 0118.955-41.923c3.8-5.657 2.254-11.944 4.655-17.6 2-4.707 4.352-9 8.056-12.525 2.4-2.28 4.949-3.989 8.369-2.024 3.209 1.843 4.549 3.869 4.75 8.309 1.253 27.775-9.261 52.535-18.627 77.647-2.071 5.552-5.381 10.332-8.83 15.086-2.315 3.192-5.113 4.814-8.757 4.429z'/%3E%3C/svg%3E%0A");
          transform: translate(-50%, -50%);
          opacity: 0.3;
        }

        footer p {
          margin: 0.25rem 0 0;
          font-size: 13px;
          font-weight: 500;
        }

        nav a {
          padding: 1.3em 1em;
          border-bottom: 4px solid transparent;
          text-decoration: none;
          font-weight: 500;
          font-size: 17px;
          display: inline-block;
        }

        nav a:hover {
          border-bottom-color: hsla(40, 85%, 75%, 1);
        }
      `}</style>

      <style jsx global>{`
        body {
          padding: 0;
          margin: 0;
          font-family: "Barlow", sans-serif;
          color: #333;
          font-size: 18px;
        }

        a {
          text-decoration: none;
          color: #555;
        }

        a:hover {
          text-decoration: underline;
          color: #333;
        }

        h1,
        h2,
        h3,
        h4,
        h5 {
          font-weight: 700;
          letter-spacing: -0.04em;
        }

        p,
        li {
          line-height: 1.6;
        }

        .o-main {
          max-width: 80ch;
        }

        .o-main a {
          text-decoration: underline;
        }

        .o-main a:hover {
          text-decoration: none;
        }
      `}</style>
    </div>
  );
}

export default Layout;
